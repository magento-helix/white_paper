[
    {
        "type": "title",
        "pages": [
            {
                "blocks": [
                    {
                        "type": "documentTitle",
                        "data": "Measurements on AWS Infrastructure"
                    },
                    {
                        "type": "documentAuthors",
                        "data": "Helix team<w:br/><w:br/>Sustaining Engineering,<w:br/>Magento"
                    }
                ]
            }
        ]
    },
    {
        "title": "Introduction",
        "type": "introduction",
        "pages": [
            {
                "blocks": [
                    {
                        "type": "text",
                        "data": "This whitepaper aims to validate Magento Commerce (former Enterprise) product for cases of small, medium, large and extra large profiles, proving that platform meets requirements of high-traffic e-commerce site and provides additional capacity for potential growth. Additionally, whitepaper has client side measurements for main pages. It will help e-commerce managers and technical staff to better understand the performance characteristics of the application and get an idea of the recommended infrastructure to run large-scale Magento Commerce store."
                    }
                ]
            }
        ]
    },
    {
        "title": "Environment",
        "type": "environment",
        "pages": [
            {
                "blocks": [
                    {
                        "type": "image",
                        "data": "/resources/Content/Environment.png"
                    }
                ]
            },
            {
                "blocks": [
                    {
                        "type": "inlineTable",
                        "data": {
                            "rows": [
                                [
                                    "Configuration /<w:br/>Instance",
                                    "12 cores",
                                    "24 cores",
                                    "48 cores",
                                    "120 cores"
                                ],
                                [
                                    "Instance type",
                                    "m4",
                                    "m4",
                                    "m4",
                                    "m4"
                                ],
                                [
                                    "Elasticsearch<w:br/>(version:1.7.6)",
                                    "HEAP_SIZE = 2G<w:br/>data dir size = 10G",
                                    "HEAP_SIZE = 4G<w:br/>data dir size = 20G",
                                    "HEAP_SIZE = 6G<w:br/>data dir size = 30G",
                                    "HEAP_SIZE = 8G<w:br/>data dir size = 40G"
                                ],
                                [
                                    "Mysql ",
                                    "innodb_buffer_size = 6G<w:br/>space = 200Gb",
                                    "innodb_buffer_size = 12G<w:br/>space = 200Gb",
                                    "innodb_buffer_size = 18G<w:br/>space = 200Gb",
                                    "innodb_buffer_size = 24G<w:br/>space = 200Gb"
                                ],
                                [
                                    "CPU ",
                                    "Intel(R) Xeon(R) CPU E5-2686 v4<w:br/>L1d = 32K<w:br/>L1i = 32K<w:br/>L2 = 256K<w:br/>L3 = 46080K",
                                    null,
                                    null,
                                    null
                                ],
                                [
                                    "Redis ",
                                    "configuration = master + 2 slaves<w:br/>version =3.2.8<w:br/>maxclients = 10000<w:br/>maxmemory = 512mb",
                                    null,
                                    null,
                                    null
                                ],
                                [
                                    "Fastly ",
                                    "max_conn = 200",
                                    null,
                                    null,
                                    null
                                ],
                                [
                                    "Cron ",
                                    "run each 5 minuts",
                                    null,
                                    null,
                                    null
                                ]
                            ]
                        }
                    }
                ]
            }
        ]
    },
    {
        "title": "Condition",
        "type": "condition",
        "pages": [
            {
                "blocks": [
                    {
                        "type": "inlineTable",
                        "data": {
                            "rows": [
                                [
                                    "Configuration /<w:br/>Instance",
                                    "12 cores",
                                    "24 cores",
                                    "48 cores",
                                    "120 cores"
                                ],
                                [
                                    "Small",
                                    "",
                                    "",
                                    "",
                                    ""
                                ],
                                [
                                    "Medium",
                                    "",
                                    "",
                                    "",
                                    ""
                                ],
                                [
                                    "Large",
                                    "",
                                    "",
                                    "",
                                    ""
                                ],
                                [
                                    "Extra Large",
                                    "",
                                    "",
                                    "website/store/store view = 5<w:br/>individual simples = 600K<w:br/>configurable products = 16K<w:br/>(with 11 simples for each configurable ~ 176K simples)",
                                    ""
                                ]
                            ]
                        }
                    }
                ]
            }
        ]
    },
    {
        "title": "Emulation details",
        "type": "emulationDetails",
        "pages": [
            {
                "blocks": [
                    {
                        "type": "pieChart",
                        "data": {
                            "title": "Frontend Scenarios",
                            "type": "chart_inline",
                            "categories": [
                                "browse catalog by guest",
                                "search",
                                "quick search",
                                "quick search with filter",
                                "advanced search",
                                "checkout by guest",
                                "checkout by customer",
                                "add to cart by guest",
                                "add to wishlist",
                                "compare products"
                            ],
                            "data": {
                                "items": [
                                    [
                                        30.00,
                                        30.00,
                                        60.00,
                                        30.00,
                                        10.00,
                                        4.00,
                                        4.00,
                                        28.00,
                                        2.00,
                                        2.00
                                    ]
                                ]
                            }
                        }
                    },
                    {
                        "type": "pieChart",
                        "data": {
                            "title": "Admin Scenarios",
                            "type": "chart_inline",
                            "categories": [
                                "promotion rules",
                                "category management",
                                "product edit",
                                "product create",
                                "edit order",
                                "create order",
                                "returns management",
                                "customer grid"
                            ],
                            "data": {
                                "items": [
                                    [
                                        15.00,
                                        10.00,
                                        35.00,
                                        25.00,
                                        15.00,
                                        10.00,
                                        70.00,
                                        20.00
                                    ]
                                ]
                            }
                        }
                    }
                ]
            }
        ]
    },
    {
        "title": "Load generation flow",
        "type": "loadGenerationFlow",
        "contentType": "config",
        "pages": [
            {
                "src": "SS",
                "blocks": [
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Active threads over time",
                            "type": "chart_jtl",
                            "metrics": [{"type": "avg", "config": {}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "grpThreads",
                                "items": [
                                    {
                                        "title": "Frontend Pool",
                                        "tag_field": "threadName",
                                        "tags": [
                                            "Frontend Pool"
                                        ]
                                    },
                                    {
                                        "title": "Admin Pool",
                                        "tag_field": "threadName",
                                        "tags": [
                                            "Admin Pool"
                                        ]
                                    },
                                    {
                                        "title": "CSR Pool",
                                        "tag_field": "threadName",
                                        "tags": [
                                            "CSR Pool"
                                        ]
                                    }
                                ]
                            }
                        }
                    },
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Response Time Over Time (successful responses)",
                            "type": "chart_jtl",
                            "metrics": [{"type": "percentile", "config": {"lvl": "90"}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "90 percentile",
                                        "tag_field": "threadName",
                                        "tags": [
                                            "Frontend Pool",
                                            "Admin Pool",
                                            "CSR Pool"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "responseCode",
                                                "value": "200",
                                                "type": "equals"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Median for cashed pages",
                                        "tag_field": "threadName",
                                        "tags": [
                                            "Frontend Pool",
                                            "Admin Pool",
                                            "CSR Pool"
                                        ],
                                        "metrics": [{"type": "percentile", "config": {"lvl": "50"}}],
                                        "conditions": [
                                            {
                                                "field": "responseCode",
                                                "value": "200",
                                                "type": "equals"
                                            },
                                            {
                                                "field": "URL",
                                                "value": "cacheModifier",
                                                "type": "notcontains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Median for NOT cashed pages",
                                        "tag_field": "threadName",
                                        "tags": [
                                            "Frontend Pool",
                                            "Admin Pool",
                                            "CSR Pool"
                                        ],
                                        "metrics": [{"type": "percentile", "config": {"lvl": "50"}}],
                                        "conditions": [
                                            {
                                                "field": "responseCode",
                                                "value": "200",
                                                "type": "equals"
                                            },
                                            {
                                                "field": "URL",
                                                "value": "cacheModifier",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                ]
            },
            {
                "src": "SS",
                "blocks": [
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Catalog browsing by guest",
                            "type": "chart_jtl",
                            "metrics": [{"type": "avg", "config": {}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "Category page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Open Category"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Guest",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Home page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Open Home Page"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Guest",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Simple product page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Simple Product"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "View",
                                                "type": "contains"
                                            },
                                            {
                                                "field": "label",
                                                "value": "Guest",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Complex product page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Configurable Product"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "View",
                                                "type": "contains"
                                            },
                                            {
                                                "field": "label",
                                                "value": "Guest",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    },
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Catalog browsing by customer",
                            "type": "chart_jtl",
                            "metrics": [{"type": "avg", "config": {}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "Category page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Open Category"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Customer",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Home page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Open Home Page"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Customer",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Simple product page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Simple Product"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "View",
                                                "type": "contains"
                                            },
                                            {
                                                "field": "label",
                                                "value": "Customer",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Complex product page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Configurable Product"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "View",
                                                "type": "contains"
                                            },
                                            {
                                                "field": "label",
                                                "value": "Customer",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                ]
            },
            {
                "src": "SS",
                "blocks": [
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Checkout start page",
                            "type": "chart_jtl",
                            "metrics": [{"type": "avg", "config": {}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "by Guest",
                                        "tag_field": "label",
                                        "tags": [
                                            "Checkout start"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Guest",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "by Customer",
                                        "tag_field": "label",
                                        "tags": [
                                            "Checkout start"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Customer",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    },
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Checkout place order page",
                            "type": "chart_jtl",
                            "metrics": [{"type": "avg", "config": {}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "by Guest",
                                        "tag_field": "label",
                                        "tags": [
                                            "Checkout Payment Info/Place Order"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Guest",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "by Customer",
                                        "tag_field": "label",
                                        "tags": [
                                            "Checkout Payment Info/Place Order"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Customer",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                ]
            },
            {
                "src": "SS",
                "blocks": [
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Add to cart",
                            "type": "chart_jtl",
                            "metrics": [{"type": "avg", "config": {}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "by Guest",
                                        "tag_field": "label",
                                        "tags": [
                                            "Add To Cart"
                                        ],
                                        "pattern": "/Add To Cart/",
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Guest",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "by Customer",
                                        "tag_field": "label",
                                        "tags": [
                                            "Add To Cart"
                                        ],
                                        "pattern": "/Add To Cart/",
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Customer",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    },
                    {
                        "type": "lineChart",
                        "data": {
                            "title": "Search",
                            "type": "chart_jtl",
                            "metrics": [{"type": "avg", "config": {}}],
                            "categories": ["TimeLine"],
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "Quick",
                                        "tag_field": "label",
                                        "tags": [
                                            "Search"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Quick",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Quick Search With Filtration",
                                        "tag_field": "label",
                                        "tags": [
                                            "Search"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Quick Search With Filtration",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Advanced Search",
                                        "tag_field": "label",
                                        "tags": [
                                            "Search"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Advanced Search",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                ]
            },
            {
                "src": "SS",
                "blocks": [
                    {
                        "type": "jtlText",
                        "data": ""
                    },
                    {
                        "type": "jtlTable",
                        "data": {
                            "title": "Frontend Results",
                            "type": "table_jtl",
                            "metrics": [
                                {"type": "percentile", "config": {"lvl": 50}},
                                {"type": "percentile", "config": {"lvl": 90}},
                                {"type": "percentile", "config": {"lvl": 95}},
                                {"type": "percentile", "config": {"lvl": 99}}
                            ],
                            "max": 2000,
                            "data": {
                                "category": "timeStamp",
                                "value": "Latency",
                                "items": [
                                    {
                                        "title": "Category page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Open Category"
                                        ]
                                    },
                                    {
                                        "title": "Home page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Open Home Page"
                                        ]
                                    },
                                    {
                                        "title": "Simple product page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Simple Product"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "View",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Complex product page",
                                        "tag_field": "label",
                                        "tags": [
                                            "Configurable Product"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "View",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Checkout start",
                                        "tag_field": "label",
                                        "tags": [
                                            "Checkout start"
                                        ]
                                    },
                                    {
                                        "title": "Place Order",
                                        "tag_field": "label",
                                        "tags": [
                                            "Checkout Payment Info/Place Order"
                                        ]
                                    },
                                    {
                                        "title": "Add To Cart",
                                        "tag_field": "label",
                                        "tags": [
                                            "Add To Cart"
                                        ],
                                        "pattern": "/Add To Cart/"
                                    },
                                    {
                                        "title": "Quick Search",
                                        "tag_field": "label",
                                        "tags": [
                                            "Search"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Quick",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Quick Search With Filtration",
                                        "tag_field": "label",
                                        "tags": [
                                            "Search"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Quick Search With Filtration",
                                                "type": "contains"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Advanced Search",
                                        "tag_field": "label",
                                        "tags": [
                                            "Search"
                                        ],
                                        "conditions": [
                                            {
                                                "field": "label",
                                                "value": "Advanced Search",
                                                "type": "contains"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                ]
            }
        ]
    }
]